# ============================================
# WAYFARIAN SERVER - ENVIRONMENT VARIABLES
# ============================================
# 
# SECURITY WARNING: Never commit this file with real values!
# Copy this file to .env and fill in your actual credentials.
# Keep your .env file in .gitignore at all times.
#
# To get started:
# 1. Copy this file: cp .env.example .env
# 2. Fill in all required values
# 3. Never commit the .env file
# ============================================

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL connection string with SSL required
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
# 
# Add connection pooling parameters for production:
# - connection_limit: Max connections (10-20 recommended)
# - pool_timeout: Connection timeout in seconds (10-20)
# - connect_timeout: Initial connection timeout (10)
#
# Example (Render/Neon/Supabase):
# DATABASE_URL="postgresql://user:pass@host:5432/db?sslmode=require&connection_limit=10&pool_timeout=20"
DATABASE_URL="postgresql://user:password@localhost:5432/wayfarian?sslmode=require"

# Direct database URL (for migrations) - optional
# DIRECT_URL="postgresql://user:password@localhost:5432/wayfarian?sslmode=require"

# ============================================
# FIREBASE ADMIN SDK
# ============================================
# Get these from Firebase Console:
# 1. Go to Project Settings > Service Accounts
# 2. Click "Generate New Private Key"
# 3. Download the JSON file
# 4. Extract the values below
#
# SECURITY: Keep the private key secure! Never commit it!
FIREBASE_PROJECT_ID="your-project-id"
FIREBASE_CLIENT_EMAIL="firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com"
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour-Private-Key-Here\n-----END PRIVATE KEY-----\n"
FIREBASE_STORAGE_BUCKET="your-project.firebasestorage.app"

# ============================================
# CLOUDINARY CONFIGURATION
# ============================================
# Image hosting and processing service
# Get credentials from: https://cloudinary.com/console
#
# You can use either CLOUDINARY_URL or individual keys:
CLOUDINARY_URL="cloudinary://API_KEY:API_SECRET@CLOUD_NAME"
# OR
# CLOUDINARY_CLOUD_NAME="your-cloud-name"
# CLOUDINARY_API_KEY="your-api-key"
# CLOUDINARY_API_SECRET="your-api-secret"

# ============================================
# GOOGLE MAPS API
# ============================================
# Server-side Google Maps API key
# Get from: https://console.cloud.google.com/apis/credentials
#
# SECURITY: Restrict this key to server IP addresses only!
# - Go to API key settings in Google Cloud Console
# - Under "API restrictions", select "Restrict key"
# - Under "Application restrictions", choose "IP addresses"
# - Add your server's IP address
GOOGLE_MAPS_API_KEY="your-server-side-api-key"

# ============================================
# SENTRY ERROR TRACKING (Recommended)
# ============================================
# Error monitoring and performance tracking
# Sign up at: https://sentry.io/
#
# Steps:
# 1. Create a new Node.js project in Sentry
# 2. Copy the DSN from Project Settings > Client Keys
# 3. Paste it below
#
# Leave empty to disable Sentry (not recommended for production)
SENTRY_DSN=""
# Send errors from development environment (usually false)
SENTRY_ENABLE_IN_DEV=false
# Optional: Set release version for tracking
# RELEASE_VERSION="1.0.0"

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=3001
NODE_ENV="development"
# In production, set to your frontend URL:
# FRONTEND_URL="https://yourdomain.com"
FRONTEND_URL="http://localhost:19006"

# ============================================
# SECURITY CONFIGURATION
# ============================================
# JWT secret for token signing (generate a random string)
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="your-jwt-secret-here"

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Token security
# Maximum age of authentication token in seconds (default: 1 hour)
TOKEN_MAX_AGE_SECONDS=3600

# ============================================
# REDIS/VALKEY JOB QUEUE (Optional)
# ============================================
# Persistent job queue using Redis or Valkey
# Required for production horizontal scaling
#
# Set to true to enable persistent job queue
USE_VALKEY_QUEUE=false
# Redis/Valkey connection URL
# REDIS_URL="redis://localhost:6379"
# or
# VALKEY_URL="redis://localhost:6379"
# Optional: Job concurrency
# JOB_CONCURRENCY=5

# ============================================
# LOGGING
# ============================================
LOG_LEVEL="info"  # Options: error, warn, info, debug

# ============================================
# OPTIONAL CONFIGURATION
# ============================================

# Mapbox (if using Mapbox instead of Google Maps)
# MAPBOX_ACCESS_TOKEN="pk.your-mapbox-token"

# Prisma connection pooling (advanced)
# PRISMA_POOL_CONNECTIONS=10
# PRISMA_POOL_TIMEOUT=15

# ============================================
# DEPLOYMENT CHECKLIST
# ============================================
# Before deploying to production:
# [ ] All required variables are set
# [ ] No placeholder values remain
# [ ] DATABASE_URL includes ?sslmode=require
# [ ] NODE_ENV="production"
# [ ] SENTRY_DSN is configured
# [ ] API keys are restricted in provider consoles
# [ ] JWT_SECRET is a strong random value
# [ ] FRONTEND_URL points to production domain
# [ ] Different keys than dev/staging
# ============================================
